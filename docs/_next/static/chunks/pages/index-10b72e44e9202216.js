(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5984:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return K}});var o=n(7812),t=n(6835),l=n(7294),a=n(1101),c=n(5768),s=n(9499),i=n(4730),u=n(5893),d=["children"];function f(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function h(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f(Object(n),!0).forEach(function(r){(0,s.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m(e){var r=e.children,n=(0,i.Z)(e,d),o=(0,l.useState)(!1),t=o[0],a=o[1];return((0,l.useEffect)(function(){a(!0)},[]),t)?(0,u.jsx)("div",h(h({},n),{},{children:r})):null}var g=n(29),p=n(7794),x=n.n(p),v=n(2645);function j(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?j(Object(n),!0).forEach(function(r){(0,s.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function b(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return C(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,r)}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,l=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw l}}}}function C(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,o=Array(r);n<r;n++)o[n]=e[n];return o}var N="https://raw.githubusercontent.com/ryancwalsh/paint_color_gallery/main/data/colornerd.json";function O(e){var r=null;try{r=(0,v.Dp)(e)}catch(n){console.error(n)}return r}function k(e){return(0,v.Dp)(e)}function _(e){return e<360?e>=0?e:e+360:e-360}function w(e,r,n){return r<=n?e>=r&&e<=n:e>=0&&e<=n||e>=r&&e<360}function S(e,r,n){var o=r-n/100,t=r+n/100;return console.log({max:t,min:o,percentageTolerance:n,targetValue:r,value:e}),e>=o&&e<=t}function T(){return(T=(0,g.Z)(x().mark(function e(){var r,n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(N);case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e,r){var n=r.find(function(r){return r.code===e}),o=n?y(y({},n),{},{colorDetailsObject:k(e)}):void 0;return console.log("getMegaColorFromName",{colorCode:e,result:o}),o}function D(e){var r,n=(0,v.Dp)(e),o=(0,t.Z)(n.oklchVal,3),l=o[0],a=o[1];return[l*=100,a*=100,o[2]].map(function(e){return e.toFixed(1)}).join(", ")}function P(e){var r=e.megaColor,n=e.isSelectedColor,o=e.selectColor,t=r.colorDetailsObject,a=(0,l.useState)(!1),c=a[0],s=a[1];return(0,u.jsxs)("div",{style:{background:t.hex},"data-json":JSON.stringify(r),className:c?"fullscreen colorCell":"colorCell",onClick:function(){o(r.code)},children:[n&&(0,u.jsx)("div",{className:"toggleIsFullscreen",onClick:function(){s(!c)},style:{cursor:"pointer",float:"right"},children:"â¤¢"}),(0,u.jsx)("div",{className:"colorName",children:r.name}),(0,u.jsx)("div",{className:"book",style:{fontSize:"0.8rem"},children:r.book}),(0,u.jsx)("div",{className:"oklch",style:{fontSize:"0.7rem"},children:D(t.hex)})]})}function Z(e){var r=e.targetColor,n=e.setTargetColor,o=(0,v.Dp)(r);return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(0,u.jsx)("input",{value:o.hex,onChange:function(e){var r=O(e.currentTarget.value);r&&n(r.hex)}})}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{value:o.oklch,onChange:function(e){var r=O(e.currentTarget.value);r&&n(r.hex)}})}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{value:o.rgb,onChange:function(e){var r=O(e.currentTarget.value);r&&n(r.hex)}})})]})}function V(e){var r=e.setTargetColor,n=e.targetColor,o=(0,v.Dp)(n),a=(0,t.Z)(o.oklchVal,3),c=a[0],s=a[1],i=a[2],d=(0,l.useState)(c),f=d[0],h=d[1],m=(0,l.useState)(s),g=m[0],p=m[1],x=(0,l.useState)(i),j=x[0],y=x[1];return(0,l.useEffect)(function(){return r((0,v.Dp)("oklch(".concat(100*f,"% ").concat(g," ").concat(j,")")).hex),function(){}},[f,g,j,r]),(0,u.jsxs)("div",{className:"card",children:["Choose color:",(0,u.jsx)(Z,{setTargetColor:r,targetColor:n}),(0,u.jsxs)("label",{children:[(0,u.jsx)("div",{className:"label",children:"Lightness:"}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsxs)("span",{className:"currentValue",children:[(100*f).toFixed(1),"%"]}),(0,u.jsx)("input",{type:"range",defaultValue:f,onChange:function(e){return h(Number(e.target.value))},min:"0",max:"1",step:"0.01"})]})]}),(0,u.jsxs)("label",{children:[(0,u.jsx)("div",{className:"label",children:"Chroma:"}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsxs)("span",{className:"currentValue",children:[(100*g).toFixed(1),"%"]}),(0,u.jsx)("input",{type:"range",defaultValue:g,onChange:function(e){return p(Number(e.target.value))},min:"0",max:"1",step:"0.01"})]})]}),(0,u.jsxs)("label",{children:[(0,u.jsx)("div",{className:"label",children:"Hue:"}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsx)("span",{className:"currentValue",title:"out of 360 degrees",children:j.toFixed(1)}),(0,u.jsx)("input",{type:"range",defaultValue:j,onChange:function(e){return y(Number(e.target.value))},min:"0",max:"360",step:"0.1"})]})]})]})}var E=function(e){var r=e.loadedMegaColors,n=e.setLoadedMegaColors,o=(0,l.useState)(!1),t=o[0],a=o[1];function c(){a(!t)}return((0,l.useEffect)(function(){return 0===r.length&&(function(){return T.apply(this,arguments)})().then(function(e){n(e)}),function(){}},[r,n]),t)?(0,u.jsxs)("div",{className:"colorLibraryFileChooser",children:["Load from"," ",(0,u.jsx)("a",{className:"jsonLink",href:N,target:"_blank",rel:"noreferrer",style:{display:"inline-block",maxWidth:"200px",overflow:"auto"},children:N}),(0,u.jsx)("input",{type:"file",name:"colorLibraryFileChooserInput",multiple:!1,onChange:function(e){var r=Array.from(e.currentTarget.files);console.log(r);var o=new FileReader;o.onload=function(e){var r,o=null==e?void 0:null===(r=e.target)||void 0===r?void 0:r.result;console.log(o),n(JSON.parse(o))},o.readAsText(r[0])}}),(0,u.jsx)("button",{onClick:function(){return c()},children:"Hide"})]}):(0,u.jsx)("button",{onClick:function(){return c()},children:"Load new color library..."})};function H(e){var r=e.colorCode,n=e.megaColorsFilteredByBookNames,o=e.selectColor,t=L(r,n);return(0,u.jsxs)("div",{className:"historyColorCell","data-color-code":r,onClick:function(){o(r)},style:{backgroundColor:r,padding:"3px"},children:[(0,u.jsx)("span",{className:"colorName",children:null==t?void 0:t.name}),(0,u.jsx)("span",{className:"oklch",style:{float:"right",fontSize:"0.7rem"},children:D(r)})]})}function F(e){var r=e.colorHistory,n=e.megaColorsFilteredByBookNames,o=e.selectColor;return(0,u.jsxs)("div",{className:"colorHistory card",children:["History:",r.map(function(e,r){return(0,u.jsx)(H,{colorCode:e,megaColorsFilteredByBookNames:n,selectColor:o},"".concat(r,"_").concat(e))})]})}var M=n(9008),B=n.n(M),A=n(66),I=n.n(A);function R(e){var r=e.children,n=e.backgroundColor;return(0,u.jsxs)("div",{className:I().container,style:{backgroundColor:n},children:[(0,u.jsx)(B(),{children:(0,u.jsx)("title",{children:"paint_color_gallery using colornerd"})}),(0,u.jsx)("main",{className:I().main,children:r}),(0,u.jsx)("footer",{className:I().footer})]})}var W=n(8446);function U(e){return console.log({bookNames:e}),e.map(function(e){return{label:e,value:e}})}function z(e){var r=e.selectedBookNames,n=e.setSelectedBookNames,o=e.loadedMegaColors,t=U(r);console.log({defaultValue:t});var l=U(Array.from(function(e){var r,n=new Set,o=b(e);try{for(o.s();!(r=o.n()).done;){var t=r.value;n.add(t.book)}}catch(l){o.e(l)}finally{o.f()}return n}(o)));return(0,u.jsx)(W.ZP,{options:l,onChange:function(e,r){var o;console.log({actionMeta:r,chosenOptions:e}),n((console.log({options:e}),e.map(function(e){return e.value})))},isMulti:!0,defaultValue:t,placeholder:"Choose 1 or more brands (or leave blank for all)"})}function J(e){var r=e.toleranceH,n=e.setToleranceH,o=e.toleranceC,t=e.setToleranceC,l=e.toleranceL,a=e.setToleranceL;return(0,u.jsxs)("div",{className:"sliders card",children:["Tolerances:",(0,u.jsxs)("label",{children:[(0,u.jsx)("div",{className:"label",children:"Lightness:"}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsxs)("span",{className:"currentValue",children:[l,"%"]}),(0,u.jsx)("input",{type:"range",defaultValue:l,onChange:function(e){return a(Number(e.target.value))},min:"0",max:"50",step:"1"})]})]}),(0,u.jsxs)("label",{children:[(0,u.jsx)("div",{className:"label",children:"Chroma:"}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsxs)("span",{className:"currentValue",children:[o,"%"]}),(0,u.jsx)("input",{type:"range",defaultValue:o,onChange:function(e){return t(Number(e.target.value))},min:"0",max:"50",step:"1"})]})]}),(0,u.jsxs)("label",{children:[(0,u.jsx)("div",{className:"label",children:"Hue:"}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsxs)("span",{className:"currentValue",children:[r,"%"]}),(0,u.jsx)("input",{type:"range",defaultValue:r,onChange:function(e){return n(Number(e.target.value))},min:"0",max:"50",step:"1"})]})]})]})}function q(){return(0,u.jsx)("pre",{style:{maxWidth:"900px",overflow:"auto"},children:"TODO:\n    - OKLCH sliders\n    - re-enable hot-reloading\n    - fix tests\n    - read from URL\n    - add favorites\n    - figure out why history gets messed up\n    - add search\n    - allow clustering by book \n    - add 2 other styles of color picker, synched with the first \n    - add Google Analytics \n    - get a URL\n    "})}var G=function(e){var r=e.maxWidth,n=(0,l.useState)([]),o=n[0],t=n[1],a=o.map(function(e,n){return(0,u.jsxs)("div",{children:[(0,u.jsx)("img",{alt:"uploaded image",src:URL.createObjectURL(e),style:{maxWidth:r}}),(0,u.jsx)("br",{}),(0,u.jsx)("button",{onClick:function(){var e,r;return r=o.splice(n,1),void(console.log({index:n,removed:r,selectedFiles:o}),t(o))},children:"Remove"})]},e.name)});return(0,u.jsxs)("div",{className:"fileChooser",children:[(0,u.jsx)("input",{type:"file",name:"fileChooserInput",multiple:!0,onChange:function(e){var r=Array.from(e.currentTarget.files);console.log(r),t(r)}}),a]})},K=function(){var e=(0,c._)("selectedBookNames",[]),r=(0,t.Z)(e,2),n=r[0],s=r[1],i=(0,c._)("loadedMegaColors",[]),d=(0,t.Z)(i,2),f=d[0],h=d[1],g=(0,l.useState)([]),p=g[0],x=g[1],v=(0,c._)("targetColor","hsl(80deg 50% 70%)"),j=(0,t.Z)(v,2),C=j[0],N=j[1],O=(0,c._)("eyedropOnce",!1),T=(0,t.Z)(O,2),D=T[0],Z=T[1],H=(0,c._)("toleranceL",3),M=(0,t.Z)(H,2),B=M[0],A=M[1],I=(0,c._)("toleranceC",3),W=(0,t.Z)(I,2),U=W[0],K=W[1],X=(0,c._)("toleranceH",3),$=(0,t.Z)(X,2),Q=$[0],Y=$[1],ee=(0,l.useState)([]),er=ee[0],en=ee[1],eo=(0,l.useState)(null),et=eo[0],el=eo[1],ea=(0,c._)("colorHistory",[]),ec=(0,t.Z)(ea,2),es=ec[0],ei=ec[1],eu=(0,c.Nr)(B,200),ed=(0,c.Nr)(U,200),ef=(0,c.Nr)(Q,200),eh=(0,a.useEyeDrop)({once:D}),em=(0,t.Z)(eh,3);function eg(e){var r=es.length>0?es[0]:null,n=L(C,p);N(e),n&&e!==r&&ei(function(r){var n=[e].concat((0,o.Z)(r));return console.log("setColorHistory",JSON.stringify(n)),n})}em[0],em[1],em[2];var ep=function(e){eg(e.hex)},ex=function(){Z(!D)};return(0,l.useEffect)(function(){var e,r;return x(f.filter(function(e){return 0===n.length||n.includes(e.book)})),function(){}},[f,n]),(0,l.useEffect)(function(){console.log({debouncedToleranceC:ed,debouncedToleranceH:ef,debouncedToleranceL:eu});var e=k(C);console.log({targetColorDetailsObject:e});var r=function(e,r,n,o,l){var a,c,s,i,u,d=[],f=new Set,h=(0,t.Z)(e.oklchVal,3),m=h[0],g=h[1],p=h[2],x=(s=_(p-(c=3.6*l)),i=_(p+c),console.log({degreeTolerance:c,hueMax:i,hueMin:s}),[s,i]),v=(0,t.Z)(x,2),j=v[0],C=v[1],N=b(r);try{for(N.s();!(u=N.n()).done;){var O=u.value,T=k(O.code),L=(0,t.Z)(T.oklchVal,3),D=L[0],P=L[1],Z=L[2];if(w(Z,j,C)&&S(P,g,o)&&S(D,m,n)){var V=y(y({},O),{},{colorDetailsObject:T}),E="".concat(V.name,"-").concat(V.code);f.has(E)||(d.push(V),f.add(E))}}}catch(H){N.e(H)}finally{N.f()}return d}(e,p,eu,ed,ef);return en(r),function(){}},[C,p,ef,ed,eu]),(0,l.useEffect)(function(){var e=L(C,p);return console.log({foundTargetMegaColor:e}),el(null!=e?e:null),function(){}},[C,p]),(0,u.jsx)(m,{children:(0,u.jsxs)(R,{backgroundColor:C,children:[(0,u.jsx)(V,{setTargetColor:N,targetColor:C}),(0,u.jsx)(J,{setToleranceC:K,setToleranceH:Y,setToleranceL:A,toleranceC:U,toleranceH:Q,toleranceL:B}),(0,u.jsx)(F,{colorHistory:es,megaColorsFilteredByBookNames:p,selectColor:eg}),(0,u.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem"},children:[et&&(0,u.jsx)(P,{megaColor:et,isSelectedColor:!0,selectColor:eg},"".concat(et.book,"_").concat(et.code)),(0,u.jsx)("div",{className:"colors",children:er.map(function(e){return(0,u.jsx)(P,{megaColor:e,selectColor:eg},"".concat(e.book,"_").concat(e.code))})})]}),(0,u.jsx)(q,{}),(0,u.jsx)(G,{maxWidth:"600px"}),(0,u.jsxs)("div",{className:"eyedrop-wrapper",children:[(0,u.jsx)(a.EyeDropper,{once:D,onChange:ep,children:"Pick Color"}),(0,u.jsxs)("p",{children:["Once: ",D.toString()]}),(0,u.jsx)("button",{onClick:ex,children:"Toggle `once` prop"})]}),(0,u.jsx)(E,{loadedMegaColors:f,setLoadedMegaColors:h}),(0,u.jsx)(z,{loadedMegaColors:f,selectedBookNames:n,setSelectedBookNames:s})]})})}},8312:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5984)}])},66:function(e){e.exports={container:"Layout_container__z4qWC",main:"Layout_main__fbfOy",footer:"Layout_footer__bKkxe",logo:"Layout_logo__PCGqy"}}},function(e){e.O(0,[443,750,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);