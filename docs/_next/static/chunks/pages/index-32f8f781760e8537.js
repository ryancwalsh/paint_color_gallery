(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3220:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return q}});var t=r(2640),o=r(7294),l=r(1101),a=r(5768),c=r(9499),s=r(4730),i=r(5893),u=["children"];function d(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function f(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?d(Object(r),!0).forEach(function(n){(0,c.Z)(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h(e){var n=e.children,r=(0,s.Z)(e,u),t=(0,o.useState)(!1),l=t[0],a=t[1];return((0,o.useEffect)(function(){a(!0)},[]),l)?(0,i.jsx)("div",f(f({},r),{},{children:n})):null}function p(e){var n=e.megaColor,r=e.isSelectedColor,t=n.colorDetailsObject,l=(0,o.useState)(!1),a=l[0],c=l[1];return(0,i.jsxs)("div",{style:{background:t.hsl()},"data-json":JSON.stringify(n),className:a?"fullscreen colorCell":"colorCell",children:[r&&(0,i.jsx)("div",{className:"toggleIsFullscreen",onClick:function(){c(!a)},style:{float:"right"},children:"â¤¢"}),(0,i.jsx)("div",{className:"colorName",children:n.name}),(0,i.jsx)("div",{className:"book",style:{fontSize:"0.8rem"},children:n.book}),(0,i.jsx)("div",{className:"hsl",style:{fontSize:"0.7rem"},children:n.colorDetailsObject.hsl().color.map(function(e){return e.toFixed(1)}).join(", ")})]})}var g=r(29),m=r(7794),j=r.n(m),v=r(6767),b=r.n(v);function x(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?x(Object(r),!0).forEach(function(n){(0,c.Z)(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return O(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,n)}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,l=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw l}}}}function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}var N="https://raw.githubusercontent.com/ryancwalsh/paint_color_gallery/main/data/colornerd.json";function C(e){return b()(e)}function k(e){return e<360?e>=0?e:e+360:e-360}function w(e,n,r){return n<=r?e>=n&&e<=r:e>=0&&e<=r||e>=n&&e<360}function S(e,n,r){return e>=n-r&&e<=n+r}function L(e,n,r){return e>=n-r&&e<=n+r}function P(){return(P=(0,g.Z)(j().mark(function e(){var n,r;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(N);case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var T=function(e){var n=e.loadedMegaColors,r=e.setLoadedMegaColors,t=(0,o.useState)(!1),l=t[0],a=t[1];function c(){a(!l)}return((0,o.useEffect)(function(){return 0===n.length&&(function(){return P.apply(this,arguments)})().then(function(e){r(e)}),function(){}},[n,r]),l)?(0,i.jsxs)("div",{className:"colorLibraryFileChooser",children:["Load from"," ",(0,i.jsx)("a",{className:"jsonLink",href:N,target:"_blank",rel:"noreferrer",style:{display:"inline-block",maxWidth:"200px",overflow:"auto"},children:N}),(0,i.jsx)("input",{type:"file",name:"colorLibraryFileChooserInput",multiple:!1,onChange:function(e){var n=Array.from(e.currentTarget.files);console.log(n);var t=new FileReader;t.onload=function(e){var n,t=null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.result;console.log(t),r(JSON.parse(t))},t.readAsText(n[0])}}),(0,i.jsx)("button",{onClick:function(){return c()},children:"Hide"})]}):(0,i.jsx)("button",{onClick:function(){return c()},children:"Load new color library..."})},D=r(9008),E=r.n(D),Z=r(66),M=r.n(Z);function H(e){var n=e.children;return(0,i.jsxs)("div",{className:M().container,children:[(0,i.jsx)(E(),{children:(0,i.jsx)("title",{children:"paint_color_gallery using colornerd"})}),(0,i.jsx)("main",{className:M().main,children:n}),(0,i.jsx)("footer",{className:M().footer})]})}var A=r(8446);function V(e){return console.log({bookNames:e}),e.map(function(e){return{label:e,value:e}})}function F(e){var n=e.selectedBookNames,r=e.setSelectedBookNames,t=e.loadedMegaColors,o=V(n);console.log({defaultValue:o});var l=V(Array.from(function(e){var n,r=new Set,t=_(e);try{for(t.s();!(n=t.n()).done;){var o=n.value;r.add(o.book)}}catch(l){t.e(l)}finally{t.f()}return r}(t)));return(0,i.jsx)(A.ZP,{options:l,onChange:function(e,n){var t;console.log({actionMeta:n,chosenOptions:e}),r((console.log({options:e}),e.map(function(e){return e.value})))},isMulti:!0,defaultValue:o})}function B(e){var n=e.toleranceH,r=e.setToleranceH,t=e.toleranceS,o=e.setToleranceS,l=e.toleranceL,a=e.setToleranceL;return(0,i.jsxs)("div",{className:"sliders",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("div",{className:"label",children:"Hue:"}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("span",{className:"currentValue",children:[n,"%"]}),(0,i.jsx)("input",{type:"range",defaultValue:n,onChange:function(e){return r(Number(e.target.value))},min:"0",max:"50",step:"1"})]})]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("div",{className:"label",children:"Saturation:"}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("span",{className:"currentValue",children:[t,"%"]}),(0,i.jsx)("input",{type:"range",defaultValue:t,onChange:function(e){return o(Number(e.target.value))},min:"0",max:"50",step:"1"})]})]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("div",{className:"label",children:"Lightness:"}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("span",{className:"currentValue",children:[l,"%"]}),(0,i.jsx)("input",{type:"range",defaultValue:l,onChange:function(e){return a(Number(e.target.value))},min:"0",max:"50",step:"1"})]})]})]})}function I(){return(0,i.jsx)("pre",{style:{maxWidth:"900px",overflow:"auto"},children:"TODO: \n    - get color wheel working https://iro.js.org/\n    - add history\n    - add favorites\n    - allow clustering by book \n    - add 2 other styles of color picker, synched with the first \n    - add Google Analytics \n    - get a URL\n    "})}var W=function(e){var n=e.maxWidth,r=(0,o.useState)([]),t=r[0],l=r[1],a=t.map(function(e,r){return(0,i.jsxs)("div",{children:[(0,i.jsx)("img",{alt:"uploaded image",src:URL.createObjectURL(e),style:{maxWidth:n}}),(0,i.jsx)("br",{}),(0,i.jsx)("button",{onClick:function(){var e,n;return n=t.splice(r,1),void(console.log({index:r,removed:n,selectedFiles:t}),l(t))},children:"Remove"})]},e.name)});return(0,i.jsxs)("div",{className:"fileChooser",children:[(0,i.jsx)("input",{type:"file",name:"fileChooserInput",multiple:!0,onChange:function(e){var n=Array.from(e.currentTarget.files);console.log(n),l(n)}}),a]})},R=r(1673),U=r.n(R),q=function(){var e=(0,a._)("selectedBookNames",[]),n=(0,t.Z)(e,2),r=n[0],c=n[1],s=(0,a._)("loadedMegaColors",[]),u=(0,t.Z)(s,2),d=u[0],f=u[1],g=(0,o.useState)([]),m=g[0],j=g[1],v=(0,a._)("targetColor","hsl(80deg 50% 70%)"),b=(0,t.Z)(v,2),x=b[0],O=b[1],N=(0,a._)("eyedropOnce",!1),P=(0,t.Z)(N,2),D=P[0],E=P[1],Z=(0,a._)("toleranceH",3),M=(0,t.Z)(Z,2),A=M[0],V=M[1],R=(0,a._)("toleranceS",3),q=(0,t.Z)(R,2),z=q[0],J=q[1],G=(0,a._)("toleranceL",3),K=(0,t.Z)(G,2),X=K[0],Q=K[1],$=(0,o.useState)([]),Y=$[0],ee=$[1],en=(0,o.useState)(null),er=en[0],et=en[1],eo=(0,a._)("previousColor",null),el=(0,t.Z)(eo,2),ea=el[0],ec=el[1],es=(0,a.Nr)(A,200),ei=(0,a.Nr)(z,200),eu=(0,a.Nr)(X,200),ed=(0,l.useEyeDrop)({once:D}),ef=(0,t.Z)(ed,3);ef[0],ef[1],ef[2];var eh=function(e){var n=e.hex;ec(x),O(n)},ep=function(){E(!D)};return(0,o.useEffect)(function(){var e,n;return j(d.filter(function(e){return 0===r.length||r.includes(e.book)})),function(){}},[d,r]),(0,o.useEffect)(function(){console.log({debouncedToleranceH:es,debouncedToleranceL:eu,debouncedToleranceS:ei});var e=C(x);console.log({targetColorDetailsObject:e});var n,r,o,l,a,c=(n=e.hue(),o=k(n-(r=3.6*es)),l=k(n+r),console.log({degreeTolerance:r,hueMax:l,hueMin:o}),[o,l]),s=(0,t.Z)(c,2),i=function(e,n,r,t,o,l){var a,c=[],s=new Set,i=_(n);try{for(i.s();!(a=i.n()).done;){var u=a.value,d=C(u.code);if(w(d.hue(),r,t)&&S(d.saturationl(),e.saturationl(),o)&&L(d.lightness(),e.lightness(),l)){var f=y(y({},u),{},{colorDetailsObject:d}),h="".concat(f.name,"-").concat(f.code);s.has(h)||(c.push(f),s.add(h))}}}catch(p){i.e(p)}finally{i.f()}return c}(e,m,s[0],s[1],ei,eu);return ee(i),function(){}},[x,m,es,ei,eu]),(0,o.useEffect)(function(){var e,n,r,t,o=(t=(r=m.find(function(e){return e.code===x}))?y(y({},r),{},{colorDetailsObject:C(x)}):void 0,console.log("getMegaColorFromName",{colorCode:x,result:t}),t);return console.log({foundTargetMegaColor:o}),et(null!=o?o:null),function(){}},[x,m]),(0,i.jsx)(h,{children:(0,i.jsxs)(H,{children:[(0,i.jsx)("h1",{className:U().title,children:"paint_color_gallery using colornerd"}),(0,i.jsx)(T,{loadedMegaColors:d,setLoadedMegaColors:f}),(0,i.jsx)(F,{loadedMegaColors:d,selectedBookNames:r,setSelectedBookNames:c}),(0,i.jsx)(B,{setToleranceH:V,setToleranceL:Q,setToleranceS:J,toleranceH:A,toleranceL:X,toleranceS:z}),(0,i.jsx)(W,{maxWidth:"600px"}),(0,i.jsxs)("div",{className:"eyedrop-wrapper",children:[(0,i.jsx)(l.EyeDropper,{once:D,onChange:eh,children:"Pick Color"}),(0,i.jsxs)("p",{children:["Once: ",D.toString()]}),(0,i.jsx)("button",{onClick:ep,children:"Toggle `once` prop"}),(0,i.jsx)("button",{onClick:function(){ea&&(O(ea),ec(x))},children:"Use previous color"})]}),(0,i.jsxs)("div",{style:{backgroundColor:x,marginTop:"1rem",padding:"1rem"},children:[er&&(0,i.jsx)(p,{megaColor:er,isSelectedColor:!0},"".concat(er.book,"_").concat(er.code)),(0,i.jsx)("div",{className:"colors",children:Y.map(function(e){return(0,i.jsx)(p,{megaColor:e},"".concat(e.book,"_").concat(e.code))})}),(0,i.jsx)(I,{})]})]})})}},8312:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(3220)}])},1673:function(e){e.exports={title:"Home_title__q0Qg4",description:"Home_description__JhekB",code:"Home_code__2i1pD",grid:"Home_grid__npx0i",card:"Home_card__K7aTN"}},66:function(e){e.exports={container:"Layout_container__z4qWC",main:"Layout_main__fbfOy",footer:"Layout_footer__bKkxe",logo:"Layout_logo__PCGqy"}}},function(e){e.O(0,[443,560,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);